(this["webpackJsonpfullstack-js-alibrate"]=this["webpackJsonpfullstack-js-alibrate"]||[]).push([[0],{13:function(e,t,a){e.exports={logo:"login_logo__3ginN",formLogin:"login_formLogin__36aHd",bgBlue:"login_bgBlue__1exPz"}},3:function(e,t,a){e.exports={bookCover:"myLibrary_bookCover__2xxVH",mt6:"myLibrary_mt6__iJhsi",mb6:"myLibrary_mb6__2G8II",text:"myLibrary_text__23mS7",gray:"myLibrary_gray__RdstG",blue:"myLibrary_blue__31CJ7",bgBlue:"myLibrary_bgBlue__3PTY-",btnGhostViolet:"myLibrary_btnGhostViolet__WC1gl",flXl:"myLibrary_flXl__2GHdu",navStatus:"myLibrary_navStatus__343Mq",btnLink:"myLibrary_btnLink__BAAak",active:"myLibrary_active__2H3lu"}},34:function(e,t,a){},46:function(e,t,a){"use strict";a.r(t);var c=a(1),n=a.n(c),s=a(18),r=a.n(s),o=(a(33),a(34),a(11)),l=a(26),i=a(9),b=Object(i.a)(),j=a(6),d=a(25),u=a(14),m=a(12),h=a.n(m),O=a(19),x="LOADING_USER",g="LOGIN_USER",p="LOADING_MY_LIBRARY",v="FETCH_MY_LIBRARY",f=function(){return{Accept:"application/json","Content-Type":"application/json","x-access-token":localStorage.getItem("token")}};function N(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fetch(e,{method:"POST",headers:f(),body:JSON.stringify(t)})}var y="https://fullstack-js-alibrate.herokuapp.com/api/",_=a(13),k=a.n(_),L=a(0),w=function(){var e=Object(l.d)().redirect,t=Object(o.b)(),a=Object(c.useState)(""),n=Object(u.a)(a,2),s=n[0],r=n[1],i=Object(c.useState)(""),b=Object(u.a)(i,2),j=b[0],d=b[1];return Object(L.jsx)("div",{className:"container",children:Object(L.jsxs)("div",{className:"row justify-content-md-center m-1 text-center",children:[Object(L.jsx)("div",{className:"col-12 mt-5",children:Object(L.jsx)("img",{src:"https://cdn.alibrate.com/images/AlibrateLogo.svg",alt:"Logo",className:k.a.logo})}),Object(L.jsxs)("div",{className:"".concat(k.a.formLogin," col-md-6 col-lg-4 mt-5"),children:[Object(L.jsx)("div",{className:"text-left",children:Object(L.jsx)("h5",{children:"Inicia sesi\xf3n"})}),Object(L.jsxs)("form",{onSubmit:function(a){var c;a.preventDefault(),t((c={username:s,password:j,redirect:e},function(){var e=Object(O.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:x}),e.abrupt("return",N(y+"auth/signIn",c).then((function(e){return e.json()})).then((function(e){e.token&&localStorage.setItem("token",e.token),t({type:g,payload:e})})).then((function(){return window.location.href="/mi-biblioteca"})).catch((function(e){console.log(e)})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))},className:"mb-2",children:[Object(L.jsx)("div",{className:"col-12 w-100 mb-2",children:Object(L.jsx)("input",{type:"text",className:"form-control",placeholder:"Ingresa usuario o email",value:s,onChange:function(e){return r(e.target.value)}})}),Object(L.jsx)("div",{className:"col-12 w-100 mb-2",children:Object(L.jsx)("input",{type:"password",className:"form-control",placeholder:"Ingrersa tu contrase\xf1a",value:j,onChange:function(e){return d(e.target.value)}})}),Object(L.jsxs)("div",{className:"d-grid gap-2 mb-2",children:[Object(L.jsx)("button",{type:"submit",disabled:!s||!j,style:{backgroundColor:"#1c4865"},className:"btn btn-lg block text-white fs-6",children:"INICIAR SESION"}),Object(L.jsx)("span",{className:"btn btn-link",children:Object(L.jsx)("b",{children:"\xbfOlvidaste tu constrase\xf1a?"})})]}),Object(L.jsxs)("div",{className:"row g-3",children:[Object(L.jsx)("div",{className:"col-4",children:Object(L.jsx)("hr",{className:"w-100"})}),Object(L.jsx)("div",{className:"col-4",children:Object(L.jsx)("span",{children:"o ingres\xe1 con"})}),Object(L.jsx)("div",{className:"col-4",children:Object(L.jsx)("hr",{className:"w-100"})})]}),Object(L.jsx)("div",{className:"d-grid gap-2 mb-2",children:Object(L.jsx)("span",{className:"btn btn-primary btn-lg block",children:Object(L.jsx)("b",{children:"Facebook"})})})]}),Object(L.jsxs)("div",{className:"g-2 mt-3 mb-3",children:["A\xfan no tienes cuenta?"," ",Object(L.jsx)("span",{className:"btn-link",children:Object(L.jsx)("b",{children:"Registrate"})})]})]})]})})},S=localStorage.getItem("token")||"",C=function(e){var t=Object(d.a)(S).isExpired,a=e.isLayoutComponent;return t?a?Object(L.jsx)(L.Fragment,{}):Object(L.jsx)(w,{}):Object(L.jsx)(l.a,Object(j.a)({},e))};var I=function(){return Object(L.jsx)("div",{})},A=a(3),R=a.n(A),B=a(4),T=function(e){var t=e.book;return Object(L.jsx)("div",{className:"col",children:Object(L.jsx)("div",{className:"card",children:Object(L.jsxs)("article",{className:"row",children:[Object(L.jsx)("div",{className:"col-4",children:Object(L.jsx)("img",{className:"".concat(R.a.bookCover," rounded"),alt:"".concat(t.title," - ").concat(t.author),title:"".concat(t.title," | Descubre tu libro en Alibrate"),src:"https://covers.alibrate.com/".concat(t.cover,"/medium")})}),Object(L.jsxs)("div",{className:"col-8",children:[Object(L.jsxs)("div",{className:R.a.text,children:[Object(L.jsx)("small",{className:R.a.gray,children:t.genre}),Object(L.jsx)("h4",{children:t.title}),Object(L.jsx)("small",{children:t.author})]}),Object(L.jsx)(B.g,{className:R.a.flXl}),Object(L.jsx)(B.g,{className:R.a.flXl}),Object(L.jsx)(B.g,{className:R.a.flXl}),Object(L.jsx)(B.g,{className:R.a.flXl}),Object(L.jsx)(B.g,{className:R.a.flXl}),Object(L.jsx)("p",{children:Object(L.jsxs)("small",{className:R.a.gray,children:["Calificaci\xf3n general: ",Object(L.jsx)("span",{className:R.a.blue,children:"8,3"})]})}),Object(L.jsxs)("div",{className:"btn-group dropdown-hover",children:[Object(L.jsx)("button",{type:"button",className:"btn ".concat(R.a.blue," ").concat(R.a.btnGhostViolet),children:"Le\xeddo"}),Object(L.jsx)("button",{type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",className:"btn dropdown-toggle text-white ".concat(R.a.bgBlue),children:Object(L.jsx)("i",{className:"fl-chevron-bottom"})}),Object(L.jsxs)("ul",{className:"dropdown-menu dropdown-menu-right",children:[Object(L.jsx)("li",{children:Object(L.jsx)("span",{children:"Por leer"})}),Object(L.jsx)("li",{children:Object(L.jsx)("span",{children:"Leyendo"})}),Object(L.jsx)("li",{children:Object(L.jsx)("span",{children:"Le\xeddo"})}),Object(L.jsx)("li",{children:Object(L.jsx)("span",{children:"Abandonado"})})]})]})]})]})})})},G=function(e){var t=e.status,a=e.setStatus,c={borderBottom:"solid 4px #1c4865"};return Object(L.jsx)("div",{className:"text-white mb-3 ".concat(R.a.navStatus),children:Object(L.jsxs)("ul",{className:"nav justify-content-end",children:[Object(L.jsx)("li",{children:Object(L.jsx)("button",{className:"btn btn-link ".concat(R.a.btnLink),onClick:function(){return a("booksRead")},style:"booksRead"===t?c:{},children:"Le\xeddos"})}),Object(L.jsx)("li",{children:Object(L.jsx)("span",{className:"btn btn-link ".concat(R.a.btnLink),onClick:function(){return a("booksReading")},style:"booksReading"===t?c:{},children:"Leyendo"})}),Object(L.jsx)("li",{children:Object(L.jsx)("span",{className:"btn btn-link ".concat(R.a.btnLink),onClick:function(){return a("booksWishlist")},style:"booksWishlist"===t?c:{},children:"Por leer"})}),Object(L.jsx)("li",{children:Object(L.jsx)("span",{className:"btn btn-link ".concat(R.a.btnLink),onClick:function(){return a("booksAbandoned")},style:"booksAbandoned"===t?c:{},children:"Abandonados"})})]})})},E=function(){var e=Object(o.c)((function(e){return e.myLibrary.isLoading})),t=Object(o.c)((function(e){return e.myLibrary.booksMyLibrary})),a=Object(o.b)(),n=Object(c.useState)(1),s=Object(u.a)(n,1)[0],r=Object(c.useState)("booksRead"),l=Object(u.a)(r,2),i=l[0],j=l[1];return Object(c.useEffect)((function(){var e;a((e={page:s,limit:10,status:i},function(){var t=Object(O.a)(h.a.mark((function t(a){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:p}),t.abrupt("return",N(y+"my-library",e).then((function(e){return e.json()})).then((function(e){a({type:v,payload:e})})).catch((function(e){e.tokenError&&(localStorage.removeItem("token"),b.push("/login")),console.log(e)})));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()))}),[s,i,a]),Object(L.jsx)("div",{className:"container ".concat(R.a.mt6," ").concat(R.a.mb6),children:Object(L.jsxs)("div",{className:"row row-cols-1 row-cols-md-2",children:[Object(L.jsx)("div",{className:"col-md-3 mb-3",children:Object(L.jsx)("div",{className:"card",children:" Usuario"})}),Object(L.jsxs)("div",{className:"col-md-9 mb-3",children:[Object(L.jsx)(G,{status:i,setStatus:j}),Object(L.jsx)("div",{className:"row row-cols-1 row-cols-md-2 g-4",children:e?Object(L.jsx)("div",{className:"container",children:"Loading..."}):(null===t||void 0===t?void 0:t.length)>0&&t.map((function(e,t){return Object(L.jsx)(T,{book:e},t)}))})]})]})})},F=a(5),M=a.n(F),P=function(){return Object(L.jsxs)("nav",{className:"navbar navbar-collapse navbar-dark fixed-bottom p-3 ".concat(M.a.navbar),children:[Object(L.jsx)(B.e,{className:M.a.flLg,onClick:function(){return b.push("/")}}),Object(L.jsx)(B.c,{className:M.a.flLg,onClick:function(){return b.push("/mi-biblioteca")}}),Object(L.jsx)(B.a,{className:M.a.flLg}),Object(L.jsx)(B.d,{className:M.a.flLg}),Object(L.jsx)(B.f,{className:M.a.flLg})]})},X=function(){return Object(L.jsx)("nav",{className:"navbar navbar-expand-lg navbar-dark fixed-top ".concat(M.a.navbar),children:Object(L.jsxs)("div",{className:"container",children:[Object(L.jsx)("button",{className:"navbar-toggler ".concat(M.a.navbarToggler),type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(L.jsx)("span",{className:"navbar-toggler-icon"})}),Object(L.jsxs)("div",{className:"d-flex justify-content-start",children:[Object(L.jsx)("input",{className:"form-control me-2 ".concat(M.a.search),placeholder:"Buscar lectores y libros (t\xedtulo o autor)"}),Object(L.jsx)("span",{className:"nav-link ".concat(M.a.linkResults),children:"B\xfasqueda avanzada"}),Object(L.jsx)("div",{className:"mt-2",children:Object(L.jsx)(B.b,{className:M.a.flLg})})]}),Object(L.jsxs)("div",{className:"collapse navbar-expanded-lg",id:"navbarSupportedContent",children:[Object(L.jsx)("a",{href:"/",className:"navbar-brand",children:Object(L.jsx)("img",{src:"https://cdn.alibrate.com/images/AlibrateLogoWhite.svg",alt:"logo",width:"150px"})}),Object(L.jsx)(P,{})]}),Object(L.jsx)(P,{})]})})},D=function(){return Object(L.jsx)("div",{className:"container mt-5",children:Object(L.jsxs)("div",{className:"row justify-content-md-center m-1 text-center",children:[Object(L.jsx)("div",{className:"col-12 mt-5",children:Object(L.jsx)("img",{src:"https://cdn.alibrate.com/images/AlibrateLogo.svg",alt:"Logo",className:k.a.logo})}),Object(L.jsx)("div",{className:"row mt-5",children:Object(L.jsx)("div",{className:"col",children:Object(L.jsx)("button",{className:"btn text-white ".concat(k.a.bgBlue),onClick:function(){return localStorage.removeItem("token"),window.location.href="/"},children:"Salir"})})})]})})},H=function(){return Object(L.jsxs)(l.b,{history:b,children:[Object(L.jsx)(C,{component:X,isLayoutComponent:!0}),Object(L.jsxs)(l.c,{children:[Object(L.jsx)(C,{path:"/",component:D,exact:!0}),Object(L.jsx)(C,{path:"/mi-biblioteca",component:E})]}),Object(L.jsx)(C,{component:I,isLayoutComponent:!0}),Object(L.jsx)(l.a,{path:"/login",component:w})]})},J=a(15),Y=a(27),U={isLoading:!1,booksMyLibrary:[]};var V={user:null,jwt:null,isLogged:!1,isLoading:!1};var W=Object(J.b)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:return Object(j.a)(Object(j.a)({},e),{},{isLoading:!0});case g:return Object(j.a)(Object(j.a)({},e),{},{jwt:t.payload.jwt,isLogged:!0});default:return e}},myLibrary:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return Object(j.a)(Object(j.a)({},e),{},{isLoading:!0});case v:return Object(j.a)(Object(j.a)({},e),{},{booksMyLibrary:t.payload.booksMyLibrary,isLoading:!1});default:return e}}}),q=[Y.a],z=Object(J.d)(W,Object(J.c)(J.a.apply(void 0,q)));var Z=function(){return Object(L.jsx)(o.a,{store:z,children:Object(L.jsx)(H,{})})},K=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,47)).then((function(t){var a=t.getCLS,c=t.getFID,n=t.getFCP,s=t.getLCP,r=t.getTTFB;a(e),c(e),n(e),s(e),r(e)}))};r.a.render(Object(L.jsx)(n.a.StrictMode,{children:Object(L.jsx)(Z,{})}),document.getElementById("root")),K()},5:function(e,t,a){e.exports={navbar:"nav_navbar__1DjFZ",navbarToggler:"nav_navbarToggler__2ifPS",search:"nav_search__2etBa",linkResults:"nav_linkResults__1_dk9",flLg:"nav_flLg__3TLU9"}}},[[46,1,2]]]);
//# sourceMappingURL=main.fba9c5d5.chunk.js.map