(this["webpackJsonpfullstack-js-alibrate"]=this["webpackJsonpfullstack-js-alibrate"]||[]).push([[0],{13:function(e,t,a){e.exports={logo:"login_logo__H3yIg",formLogin:"login_formLogin__UaPxK",bgBlue:"login_bgBlue__1glZ-"}},3:function(e,t,a){e.exports={bookCover:"myLibrary_bookCover__1djrq",mt6:"myLibrary_mt6__13T8j",mb6:"myLibrary_mb6__nUp65",text:"myLibrary_text__1SB03",gray:"myLibrary_gray__B7VOD",blue:"myLibrary_blue__ukl96",bgBlue:"myLibrary_bgBlue__N6vtu",btnGhostViolet:"myLibrary_btnGhostViolet__1HVix",flXl:"myLibrary_flXl__kus3Z",navStatus:"myLibrary_navStatus__TFUae",btnLink:"myLibrary_btnLink__32LHj",active:"myLibrary_active__2LTKP"}},34:function(e,t,a){},46:function(e,t,a){"use strict";a.r(t);var c=a(1),n=a.n(c),s=a(18),r=a.n(s),o=(a(33),a(34),a(11)),l=a(26),i=a(9),b=Object(i.a)(),j=a(6),d=a(25),u=a(14),m=a(12),h=a.n(m),O=a(19),x="LOADING_USER",g="LOGIN_USER",p="LOADING_MY_LIBRARY",v="FETCH_MY_LIBRARY",f=function(){return{Accept:"application/json","Content-Type":"application/json","x-access-token":localStorage.getItem("token")}};function N(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fetch(e,{method:"POST",headers:f(),body:JSON.stringify(t)})}var y="localhost"===window.location.hostname?"http://localhost:2000/api/":"https://https://fullstack-js-alibrate.herokuapp.com/api/",L=a(13),_=a.n(L),k=a(0),w=function(){var e=Object(l.d)().redirect,t=Object(o.b)(),a=Object(c.useState)(""),n=Object(u.a)(a,2),s=n[0],r=n[1],i=Object(c.useState)(""),b=Object(u.a)(i,2),j=b[0],d=b[1];return Object(k.jsx)("div",{className:"container",children:Object(k.jsxs)("div",{className:"row justify-content-md-center m-1 text-center",children:[Object(k.jsx)("div",{className:"col-12 mt-5",children:Object(k.jsx)("img",{src:"https://cdn.alibrate.com/images/AlibrateLogo.svg",alt:"Logo",className:_.a.logo})}),Object(k.jsxs)("div",{className:"".concat(_.a.formLogin," col-md-6 col-lg-4 mt-5"),children:[Object(k.jsx)("div",{className:"text-left",children:Object(k.jsx)("h5",{children:"Inicia sesi\xf3n"})}),Object(k.jsxs)("form",{onSubmit:function(a){var c;a.preventDefault(),t((c={username:s,password:j,redirect:e},function(){var e=Object(O.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:x}),e.abrupt("return",N(y+"auth/signin",c).then((function(e){return e.json()})).then((function(e){localStorage.setItem("token",e.token),t({type:g,payload:e})})).then((function(){return window.location.href="/mi-biblioteca"})).catch((function(e){console.log(e)})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))},className:"mb-2",children:[Object(k.jsx)("div",{className:"col-12 w-100 mb-2",children:Object(k.jsx)("input",{type:"text",className:"form-control",placeholder:"Ingresa usuario o email",value:s,onChange:function(e){return r(e.target.value)}})}),Object(k.jsx)("div",{className:"col-12 w-100 mb-2",children:Object(k.jsx)("input",{type:"password",className:"form-control",placeholder:"Ingrersa tu contrase\xf1a",value:j,onChange:function(e){return d(e.target.value)}})}),Object(k.jsxs)("div",{className:"d-grid gap-2 mb-2",children:[Object(k.jsx)("button",{type:"submit",disabled:!s||!j,style:{backgroundColor:"#1c4865"},className:"btn btn-lg block text-white fs-6",children:"INICIAR SESION"}),Object(k.jsx)("span",{className:"btn btn-link",children:Object(k.jsx)("b",{children:"\xbfOlvidaste tu constrase\xf1a?"})})]}),Object(k.jsxs)("div",{className:"row g-3",children:[Object(k.jsx)("div",{className:"col-4",children:Object(k.jsx)("hr",{className:"w-100"})}),Object(k.jsx)("div",{className:"col-4",children:Object(k.jsx)("span",{children:"o ingres\xe1 con"})}),Object(k.jsx)("div",{className:"col-4",children:Object(k.jsx)("hr",{className:"w-100"})})]}),Object(k.jsx)("div",{className:"d-grid gap-2 mb-2",children:Object(k.jsx)("span",{className:"btn btn-primary btn-lg block",children:Object(k.jsx)("b",{children:"Facebook"})})})]}),Object(k.jsxs)("div",{className:"g-2 mt-3 mb-3",children:["A\xfan no tienes cuenta?"," ",Object(k.jsx)("span",{className:"btn-link",children:Object(k.jsx)("b",{children:"Registrate"})})]})]})]})})},S=localStorage.getItem("token")||"",C=function(e){var t=Object(d.a)(S).isExpired,a=e.isLayoutComponent;return t?a?Object(k.jsx)(k.Fragment,{}):Object(k.jsx)(w,{}):Object(k.jsx)(l.a,Object(j.a)({},e))};var I=function(){return Object(k.jsx)("div",{})},R=a(3),A=a.n(R),B=a(4),T=function(e){var t=e.book;return Object(k.jsx)("div",{className:"col",children:Object(k.jsx)("div",{className:"card",children:Object(k.jsxs)("article",{className:"row",children:[Object(k.jsx)("div",{className:"col-4",children:Object(k.jsx)("img",{className:"".concat(A.a.bookCover," rounded"),alt:"".concat(t.title," - ").concat(t.author),title:"".concat(t.title," | Descubre tu libro en Alibrate"),src:"https://covers.alibrate.com/".concat(t.cover,"/medium")})}),Object(k.jsxs)("div",{className:"col-8",children:[Object(k.jsxs)("div",{className:A.a.text,children:[Object(k.jsx)("small",{className:A.a.gray,children:t.genre}),Object(k.jsx)("h4",{children:t.title}),Object(k.jsx)("small",{children:t.author})]}),Object(k.jsx)(B.g,{className:A.a.flXl}),Object(k.jsx)(B.g,{className:A.a.flXl}),Object(k.jsx)(B.g,{className:A.a.flXl}),Object(k.jsx)(B.g,{className:A.a.flXl}),Object(k.jsx)(B.g,{className:A.a.flXl}),Object(k.jsx)("p",{children:Object(k.jsxs)("small",{className:A.a.gray,children:["Calificaci\xf3n general: ",Object(k.jsx)("span",{className:A.a.blue,children:"8,3"})]})}),Object(k.jsxs)("div",{className:"btn-group dropdown-hover",children:[Object(k.jsx)("button",{type:"button",className:"btn ".concat(A.a.blue," ").concat(A.a.btnGhostViolet),children:"Le\xeddo"}),Object(k.jsx)("button",{type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",className:"btn dropdown-toggle text-white ".concat(A.a.bgBlue),children:Object(k.jsx)("i",{className:"fl-chevron-bottom"})}),Object(k.jsxs)("ul",{className:"dropdown-menu dropdown-menu-right",children:[Object(k.jsx)("li",{children:Object(k.jsx)("span",{children:"Por leer"})}),Object(k.jsx)("li",{children:Object(k.jsx)("span",{children:"Leyendo"})}),Object(k.jsx)("li",{children:Object(k.jsx)("span",{children:"Le\xeddo"})}),Object(k.jsx)("li",{children:Object(k.jsx)("span",{children:"Abandonado"})})]})]})]})]})})})};var E=function(e){var t=e.status,a=e.setStatus,c={borderBottom:"solid 4px #1c4865"};return Object(k.jsx)("div",{className:"text-white mb-3 ".concat(A.a.navStatus),children:Object(k.jsxs)("ul",{className:"nav justify-content-end",children:[Object(k.jsx)("li",{children:Object(k.jsx)("button",{className:"btn btn-link ".concat(A.a.btnLink),onClick:function(){return a("booksRead")},style:"booksRead"===t?c:{},children:"Le\xeddos"})}),Object(k.jsx)("li",{children:Object(k.jsx)("span",{className:"btn btn-link ".concat(A.a.btnLink),onClick:function(){return a("booksReading")},style:"booksReading"===t?c:{},children:"Leyendo"})}),Object(k.jsx)("li",{children:Object(k.jsx)("span",{className:"btn btn-link ".concat(A.a.btnLink),onClick:function(){return a("booksWishlist")},style:"booksWishlist"===t?c:{},children:"Por leer"})}),Object(k.jsx)("li",{children:Object(k.jsx)("span",{className:"btn btn-link ".concat(A.a.btnLink),onClick:function(){return a("booksAbandoned")},style:"booksAbandoned"===t?c:{},children:"Abandonados"})})]})})},F=function(){var e=Object(o.c)((function(e){return e.myLibrary.isLoading})),t=Object(o.c)((function(e){return e.myLibrary.booksMyLibrary})),a=Object(o.b)(),n=Object(c.useState)(1),s=Object(u.a)(n,2),r=s[0],l=(s[1],Object(c.useState)("booksRead")),i=Object(u.a)(l,2),j=i[0],d=i[1];return Object(c.useEffect)((function(){var e;a((e={page:r,limit:10,status:j},function(){var t=Object(O.a)(h.a.mark((function t(a){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:p}),t.abrupt("return",N(y+"my-library",e).then((function(e){return e.json()})).then((function(e){a({type:v,payload:e})})).catch((function(e){e.tokenError&&(localStorage.removeItem("token"),b.push("/login")),console.log(e)})));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()))}),[r,10,j,a]),Object(k.jsx)("div",{className:"container ".concat(A.a.mt6," ").concat(A.a.mb6),children:Object(k.jsxs)("div",{className:"row row-cols-1 row-cols-md-2",children:[Object(k.jsx)("div",{className:"col-md-3 mb-3",children:Object(k.jsx)("div",{className:"card",children:" Usuario"})}),Object(k.jsxs)("div",{className:"col-md-9 mb-3",children:[Object(k.jsx)(E,{status:j,setStatus:d}),Object(k.jsx)("div",{className:"row row-cols-1 row-cols-md-2 g-4",children:e?Object(k.jsx)("div",{className:"container",children:"Loading..."}):(null===t||void 0===t?void 0:t.length)>0&&t.map((function(e,t){return Object(k.jsx)(T,{book:e},t)}))})]})]})})},X=a(5),G=a.n(X),M=function(){return Object(k.jsxs)("nav",{className:"navbar navbar-collapse navbar-dark fixed-bottom p-3 ".concat(G.a.navbar),children:[Object(k.jsx)(B.e,{className:G.a.flLg,onClick:function(){return b.push("/")}}),Object(k.jsx)(B.c,{className:G.a.flLg,onClick:function(){return b.push("/mi-biblioteca")}}),Object(k.jsx)(B.a,{className:G.a.flLg}),Object(k.jsx)(B.d,{className:G.a.flLg}),Object(k.jsx)(B.f,{className:G.a.flLg})]})},P=function(){return Object(k.jsx)("nav",{className:"navbar navbar-expand-lg navbar-dark fixed-top ".concat(G.a.navbar),children:Object(k.jsxs)("div",{className:"container",children:[Object(k.jsx)("button",{className:"navbar-toggler ".concat(G.a.navbarToggler),type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(k.jsx)("span",{className:"navbar-toggler-icon"})}),Object(k.jsxs)("div",{className:"d-flex justify-content-start",children:[Object(k.jsx)("input",{className:"form-control me-2 ".concat(G.a.search),placeholder:"Buscar lectores y libros (t\xedtulo o autor)"}),Object(k.jsx)("span",{className:"nav-link ".concat(G.a.linkResults),children:"B\xfasqueda avanzada"}),Object(k.jsx)("div",{className:"mt-2",children:Object(k.jsx)(B.b,{className:G.a.flLg})})]}),Object(k.jsxs)("div",{className:"collapse navbar-expanded-lg",id:"navbarSupportedContent",children:[Object(k.jsx)("a",{href:"/",className:"navbar-brand",children:Object(k.jsx)("img",{src:"https://cdn.alibrate.com/images/AlibrateLogoWhite.svg",alt:"logo",width:"150px"})}),Object(k.jsx)(M,{})]}),Object(k.jsx)(M,{})]})})},D=function(){return Object(k.jsx)("div",{className:"container mt-5",children:Object(k.jsxs)("div",{className:"row justify-content-md-center m-1 text-center",children:[Object(k.jsx)("div",{className:"col-12 mt-5",children:Object(k.jsx)("img",{src:"https://cdn.alibrate.com/images/AlibrateLogo.svg",alt:"Logo",className:_.a.logo})}),Object(k.jsx)("div",{className:"row mt-5",children:Object(k.jsx)("div",{className:"col",children:Object(k.jsx)("button",{className:"btn text-white ".concat(_.a.bgBlue),onClick:function(){return localStorage.removeItem("token"),window.location.href="/"},children:"Salir"})})})]})})},U=function(){return Object(k.jsxs)(l.b,{history:b,children:[Object(k.jsx)(C,{component:P,isLayoutComponent:!0}),Object(k.jsxs)(l.c,{children:[Object(k.jsx)(C,{path:"/",component:D,exact:!0}),Object(k.jsx)(C,{path:"/mi-biblioteca",component:F})]}),Object(k.jsx)(C,{component:I,isLayoutComponent:!0}),Object(k.jsx)(l.a,{path:"/login",component:w})]})},V=a(15),H=a(27),Y={isLoading:!1,booksMyLibrary:[]};var q={user:null,jwt:null,isLogged:!1,isLoading:!1};var J=Object(V.b)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:return Object(j.a)(Object(j.a)({},e),{},{isLoading:!0});case g:return Object(j.a)(Object(j.a)({},e),{},{jwt:t.payload.jwt,isLogged:!0});default:return e}},myLibrary:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return Object(j.a)(Object(j.a)({},e),{},{isLoading:!0});case v:return Object(j.a)(Object(j.a)({},e),{},{booksMyLibrary:t.payload.booksMyLibrary,isLoading:!1});default:return e}}}),K=[H.a],W=Object(V.d)(J,Object(V.c)(V.a.apply(void 0,K)));var z=function(){return Object(k.jsx)(o.a,{store:W,children:Object(k.jsx)(U,{})})},Z=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,47)).then((function(t){var a=t.getCLS,c=t.getFID,n=t.getFCP,s=t.getLCP,r=t.getTTFB;a(e),c(e),n(e),s(e),r(e)}))};r.a.render(Object(k.jsx)(n.a.StrictMode,{children:Object(k.jsx)(z,{})}),document.getElementById("root")),Z()},5:function(e,t,a){e.exports={navbar:"nav_navbar__6rvu5",navbarToggler:"nav_navbarToggler__2KmlG",search:"nav_search__1Qzcr",linkResults:"nav_linkResults__3Xc03",flLg:"nav_flLg__1qiVb"}}},[[46,1,2]]]);
//# sourceMappingURL=main.a111c98a.chunk.js.map