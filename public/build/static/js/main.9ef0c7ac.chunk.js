(this["webpackJsonpfullstack-js-alibrate"]=this["webpackJsonpfullstack-js-alibrate"]||[]).push([[0],{14:function(e,t,c){e.exports={logo:"login_logo__H3yIg",formLogin:"login_formLogin__UaPxK"}},30:function(e,t,c){},42:function(e,t,c){"use strict";c.r(t);var n=c(0),a=c.n(n),r=c(15),s=c.n(r),i=(c(29),c(30),c(5)),o=c(43),l=c(7),b=Object(l.a)(),j=c(3),u=c(22),d=c(1),m=function(e){var t=localStorage.getItem("token"),c=Object(u.a)(t).isExpired;return Object(n.useEffect)((function(){if(c){var e="/login?redirect=".concat(window.location.pathname);window.location.href=e}}),[c]),Object(d.jsx)(o.a,Object(j.a)({},e))},h=c(10),O=c(9),g=c.n(O),p=c(16),f="LOADING_USER",x="LOGIN_USER",v="LOADING_MY_LIBRARY",y="FETCH_MY_LIBRARY",N=function(){return{Accept:"application/json","Content-Type":"application/json","x-access-token":localStorage.getItem("token")}};function w(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fetch(e,{method:"POST",headers:N(),body:JSON.stringify(t)})}var L="localhost"===window.location.hostname?"http://localhost:2000/api/":"https://https://fullstack-js-alibrate.herokuapp.com/api/",k=c(14),I=c.n(k),S=function(e){var t=e.match.params.redirect,c=Object(i.b)(),a=Object(n.useState)(""),r=Object(h.a)(a,2),s=r[0],o=r[1],l=Object(n.useState)(""),j=Object(h.a)(l,2),u=j[0],m=j[1];return Object(d.jsx)("div",{className:"container ",children:Object(d.jsxs)("div",{className:"row justify-content-md-center m-1 text-center",children:[Object(d.jsx)("div",{className:"col-12 mt-5",children:Object(d.jsx)("img",{src:"https://cdn.alibrate.com/images/AlibrateLogoWhite.svg",alt:"Logo",className:I.a.logo})}),Object(d.jsxs)("div",{className:"".concat(I.a.formLogin," col-md-6 col-lg-4 mt-5"),children:[Object(d.jsx)("div",{className:"text-left",children:Object(d.jsx)("h5",{children:"Inicia sesi\xf3n"})}),Object(d.jsxs)("form",{onSubmit:function(e){var n;e.preventDefault(),c((n={username:s,password:u,redirect:t},function(){var e=Object(p.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:f}),e.abrupt("return",w(L+"auth/signin",n).then((function(e){return e.json()})).then((function(e){localStorage.setItem("token",e.token),t({type:x,payload:e})})).then((function(){return b.push(n.redirect?n.redirect:"/mi-biblioteca")})).catch((function(e){localStorage.removeItem("token"),console.log(e)})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))},className:"mb-2",children:[Object(d.jsx)("div",{className:"col-12 w-100 mb-2",children:Object(d.jsx)("input",{type:"text",className:"form-control",placeholder:"Ingresa usuario o email",value:s,onChange:function(e){return o(e.target.value)}})}),Object(d.jsx)("div",{className:"col-12 w-100 mb-2",children:Object(d.jsx)("input",{type:"password",className:"form-control",placeholder:"Ingrersa tu contrase\xf1a",value:u,onChange:function(e){return m(e.target.value)}})}),Object(d.jsxs)("div",{className:"d-grid gap-2 mb-2",children:[Object(d.jsx)("button",{type:"submit",disabled:!s||!u,style:{backgroundColor:"#1c4865"},className:"btn btn-lg block text-white fs-6",children:"INICIAR SESION"}),Object(d.jsx)("span",{className:"btn btn-link",children:Object(d.jsx)("b",{children:"\xbfOlvidaste tu constrase\xf1a?"})})]}),Object(d.jsxs)("div",{className:"row g-3",children:[Object(d.jsx)("div",{className:"col-4",children:Object(d.jsx)("hr",{className:"w-100"})}),Object(d.jsx)("div",{className:"col-4",children:Object(d.jsx)("span",{children:"o ingres\xe1 con"})}),Object(d.jsx)("div",{className:"col-4",children:Object(d.jsx)("hr",{className:"w-100"})})]}),Object(d.jsx)("div",{className:"d-grid gap-2 mb-2",children:Object(d.jsx)("span",{className:"btn btn-primary btn-lg block",children:Object(d.jsx)("b",{children:"Facebook"})})})]}),Object(d.jsxs)("div",{className:"g-2 mt-3 mb-3",children:["A\xfan no tienes cuenta?"," ",Object(d.jsx)("span",{className:"btn-link",children:Object(d.jsx)("b",{children:"Registrate"})})]})]})]})})};var _=function(e){var t=e.book;return Object(d.jsx)("div",{className:"text-white",children:t.title})},C=function(){var e=Object(i.c)((function(e){return e.myLibrary.isLoading})),t=Object(i.c)((function(e){return e.myLibrary.booksMyLibrary})),c=Object(i.b)(),a=Object(n.useState)(1),r=Object(h.a)(a,2),s=r[0],o=(r[1],Object(n.useState)("read")),l=Object(h.a)(o,2),b=l[0];l[1];return Object(n.useEffect)((function(){var e;c((e={page:s,limit:10,status:b},function(){var t=Object(p.a)(g.a.mark((function t(c){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c({type:v}),t.abrupt("return",w(L+"my-library",e).then((function(e){return e.json()})).then((function(e){c({type:y,payload:e})})).catch((function(e){"jwt expired"===e.message&&localStorage.removeItem("token"),console.log(e)})));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()))}),[s,10,b,c]),e?Object(d.jsx)("div",{className:"container",children:"Loading..."}):Object(d.jsx)("div",{className:"container",children:(null===t||void 0===t?void 0:t.length)>0&&t.map((function(e,t){return Object(d.jsx)(_,{book:e},t)}))})};var A=function(){return Object(d.jsx)("div",{})};var E=function(){return Object(d.jsx)("div",{})},M=function(){var e=Object(i.b)();return Object(d.jsx)("div",{className:"container ",children:Object(d.jsxs)("div",{className:"row justify-content-md-center m-1 text-center",children:[Object(d.jsx)("div",{className:"col-12 mt-5",children:Object(d.jsx)("img",{src:"https://cdn.alibrate.com/images/AlibrateLogoWhite.svg",alt:"Logo",className:I.a.logo})}),Object(d.jsxs)("div",{className:"row mt-5",children:[Object(d.jsx)("div",{className:"col",children:Object(d.jsx)("button",{className:"btn btn-light",onClick:function(){return b.push("/mi-biblioteca")},children:"Mi biblioteca"})}),Object(d.jsxs)("div",{className:"col",children:[" ",Object(d.jsx)("button",{className:"btn btn-light",onClick:function(){return e((localStorage.removeItem("token"),void(window.location.href="/")))},children:"Logout"})]})]})]})})},R=function(){return Object(d.jsxs)(o.b,{history:b,children:[Object(d.jsx)(o.a,{path:"/login",component:S,exact:!0}),Object(d.jsx)(A,{}),Object(d.jsxs)(o.c,{children:[Object(d.jsx)(m,{path:"/",component:M,exact:!0}),Object(d.jsx)(m,{path:"/mi-biblioteca",component:C})]}),Object(d.jsx)(E,{})]})},F=c(11),T=c(23),B={isLoading:!1,booksMyLibrary:[]};var D={user:null,jwt:null,isLogged:!1,isLoading:!1};var P=Object(F.b)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return Object(j.a)(Object(j.a)({},e),{},{isLoading:!0});case x:return Object(j.a)(Object(j.a)({},e),{},{jwt:t.payload.jwt,isLogged:!0});default:return e}},myLibrary:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return Object(j.a)(Object(j.a)({},e),{},{isLoading:!0});case y:return Object(j.a)(Object(j.a)({},e),{},{booksMyLibrary:t.payload.booksMyLibrary,isLoading:!1});default:return e}}}),Y=[T.a],G=Object(F.d)(P,Object(F.c)(F.a.apply(void 0,Y)));var J=function(){return Object(d.jsx)(i.a,{store:G,children:Object(d.jsx)(R,{})})},U=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,44)).then((function(t){var c=t.getCLS,n=t.getFID,a=t.getFCP,r=t.getLCP,s=t.getTTFB;c(e),n(e),a(e),r(e),s(e)}))};s.a.render(Object(d.jsx)(a.a.StrictMode,{children:Object(d.jsx)(J,{})}),document.getElementById("root")),U()}},[[42,1,2]]]);
//# sourceMappingURL=main.9ef0c7ac.chunk.js.map